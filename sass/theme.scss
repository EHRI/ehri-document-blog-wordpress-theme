@import "theme/theme_variables";
// <--------- Add your variables into this file. Also add variables to overwrite Bootstrap or UnderStrap variables here
@import "assets/bootstrap4";
// <--------- Loads Bootstrap3 or Bootstrap4. Change from /bootstrap3 to /bootstrap4 Watch out! just for testing in the moment!
@import "understrap/understrap";
// <-------- Loads the UnderStrap defaults. Just a few classes to incorporate BS in WP
//Optional files - If you dont use the corresponding scripts/fonts comment em out
@import "assets/font-awesome";
// <------- Font Awesome Icon font
@import "assets/underscores";
// <------- Underscores media styles
// Any additional imported files //
@import "theme/theme";
// <--------- That's where you can add your own design. Thats your part!
@import "theme/contact-form7"; // Contact Form 7 - Bootstrap 4 support

$small-margin: .75rem;
$medium-margin: 1.5rem;
$large-margin: 3rem;

// Certain headings are uppercased
h2, h4 {
  text-transform: uppercase;
}

// Mixin for applying heading-like text to
// certain items
%heading-text {
  font-size: $h4-font-size;
  font-family: $headings-font-family;
  font-weight: 400;
  text-transform: uppercase;
}

// Main sidebar layout
.content-area {
  @extend .col-lg-9;
}

#right-sidebar {
  @extend .col-lg-3;
}

// Certain buttons are uppercased
.btn-primary, .btn-outline-primary {
  text-transform: uppercase;
}

// Main header spacing
.page-header {
  margin-bottom: $medium-margin;
}

// Spacing for main page components
article.post, .comments-area {
  border-bottom: 1px solid $divider-color;
  padding-bottom: $medium-margin;
  margin-bottom: $large-margin;
}

// Ensure last item in the site-main doesn't have a bottom border
main.site-main > div:last-child {
  border-bottom: none;
}

// Page metadata
.entry-meta {
  margin-bottom: $small-margin;

  .byline::after {
	content: ' | ';
  }
}

// Single post components styling
#single-wrapper article.post {
  padding-bottom: 0;

  .entry-cover-image {
	img {
	  width: 100%;
	  height: auto;
	}

	margin: $medium-margin 0;
  }

  .entry-content {
	padding-bottom: $medium-margin;
  }

  .entry-footer {
	border-top: 1px solid $divider-color;
	padding-top: $medium-margin;
  }

  .entry-meta {
	color: $text-muted;
  }

  // Post metadata is hidden when the sidebar is visible
  // since it's there instead.
  @media (min-width: map_get($container-max-widths, lg)) {
	.entry-meta {
	  display: none;
	}
  }
}

// Post list (blog, search) components styling
#index-wrapper article.post, #search-wrapper article.post, #archive-wrapper article.post {
  @include make-row('no-gutters');

  .entry-thumbnail {
	@include make-col-ready('no-gutters');

	@include media-breakpoint-up(lg) {
	  @include make-col(4);
	  margin-right: 1rem;
	}

	margin-bottom: 1rem;

	height: 0;
	padding-bottom: 30%; /* % of width, defines aspect ratio*/

	background-repeat: no-repeat;
	background-position: center center;
	background-size: cover;
  }

  .entry-body {
	@include make-col-ready('no-gutters');

	@include media-breakpoint-up(lg) {
	  @include make-col(7);
	}

	padding: 0;

	.entry-title {
	  font-size: $h2-font-size;
	  margin-bottom: $small-margin;
	}
  }

  // in post lists all metadata is greyed out
  .entry-meta * {
	@extend .text-muted;
	font-size: $font-size-sm;
  }
}

// Navbar
body.home #wrapper-navbar {
  background-size: cover;
  background-position: center right;
  background-repeat: no-repeat;
}

body.home #wrapper-navbar-overlay {
  position: relative;
  height: 100%;
  background-color: rgba(54, 15, 79, 0.68);
}

body.home #primary-nav {
  background-color: transparent !important;
}

#wrapper-navbar #primary-nav a.nav-link, #wrapper-navbar #primary-nav .navbar-brand {
  @extend %heading-text;
  color: $white;
}

#primary-nav #search-controls {
  .input-group-append {
	margin-left: 0;
  }

  background-color: rgba(255, 255, 255, 0.1);

  input, button {
	border-radius: 0;
	color: $white !important;
	background-color: transparent;
	border-color: rgba(224, 224, 224, 0.3);
  }

  input:focus {
	-webkit-box-shadow: none;
	box-shadow: none;
  }

  input::placeholder, *::-webkit-search-cancel-button {
	color: $white
  }
}

// At wide display, pad navbar items
@media (min-width: map_get($container-max-widths, md)) {
  #navbar-nav-dropdown {
	.nav-item {
	  padding-left: 1rem;
	  padding-right: 1rem;
	}
  }
}

// At narrow display, add borders and extra vertical padding
// to navbar items
@media (max-width: map_get($container-max-widths, md)) {

  #navbar-nav-dropdown .nav-item, #navbar-nav-dropdown #navbar-nav-search {
	padding-top: .5rem;
	padding-bottom: .5rem;
  }

  #navbar-nav-dropdown .nav-item {
	border-bottom: 1px solid rgba(224, 224, 224, 0.3);
  }

  #navbar-nav-dropdown .nav-item:first-child {
	margin-top: .5rem;
	border-top: 1px solid rgba(224, 224, 224, 0.3);
  }
}

// Link to all articles on home page
.all-articles-menu {
  @extend .btn, .btn-primary;
}

@media (max-width: map_get($container-max-widths, md)) {

  // add bottom padding and a margin
  .all-articles {
	width: 100%;
	margin-bottom: $medium-margin;
  }
}

// Search form
#searchform {
  margin-bottom: $medium-margin;
}

// Widgets
.widget {
  margin-bottom: $medium-margin;
}

// NB: class differs in sidebar and
// the top menu dropdown as rendered
// by Wordpress :(
.widget-title, .widgettitle {
  @extend %heading-text;
  margin-bottom: 1rem;
}

#categories-dropdown {
  padding: 2rem;
}

#content {
  padding-top: $large-margin;
}

#wrapper-hero {
  color: $white;
  padding-bottom: 2rem;
  padding-top: 2rem;
}

@media (min-width: map_get($container-max-widths, lg)) {
  #wrapper-hero {
	font-size: $font-size-lg;
	height: 250px;
  }
  #wrapper-hero #hero-content {
	padding-top: 5rem;

	#hero-tagline {
	  width: 75%;
	}
  }

  #categories-dropdown {
	min-width: 20rem;
	box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.5);
  }

  .dropdown-menu-tab {
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 0 10px 10px 10px;
	border-color: transparent transparent #ffffff transparent;
	margin: -40px auto 20px 5px;
  }
}

%category-badge {
  @extend .badge, .badge-secondary;
  background-color: $ehri-gray;
  color: $gray-900;
  font-weight: $font-weight-lighter;
  padding: .3rem 1rem;
  font-size: $font-size-sm;
}

.widget_categories, .widget_ehri_post_categories, .cat-links, .tags-links {
  ul {
	@extend .list-unstyled, .clearfix;

	li {
	  float: left;
	  margin-right: $medium-margin / 3;
	  margin-bottom: $medium-margin / 3;
	}

	li a {
	  @extend %category-badge;
	}
  }
}

.cat-links, .tags-links {
  color: $text-muted;
  font-size: $font-size-sm;

  ul {
	margin-left: 0.4rem;
	display: inline-flex;
  }
}

// HACKS, to get tag cloud widget looking like the
// list of categories. Probably better to write our
// own tag list manually.
.widget_tag_cloud, .widget_ehri_post_tags {
  @extend .clearfix;
  margin-bottom: 1rem;

  a {
	@extend %category-badge;
	background-color: $white;
	display: list-item;
	float: left;
	list-style: none;
	border: 1px solid #cecfcf;
	font-size: $font-size-sm !important;
	margin-right: 0.4rem;
	margin-bottom: 0.4rem;
  }
}

// Authors list widget
.widget_ehri_authors_list {
  ul {
	@extend .list-unstyled, .clearfix;

	li {
	  margin-bottom: 0.4rem;
	}
  }
}

// EHRI Comment Link widget
.widget {
  #post-comment-number {
	margin-left: $medium-margin / 3;
	margin-right: $medium-margin / 3;
  }
}

// Footer
#wrapper-footer-full {

  .footer-full-sections {
	@extend .row;

	.footer-full-section-social {
	  @extend .col-md-6;
	}

	.footer-full-section-menu {
	  @extend .col-md-6;

	  .footer-full-menus {
		@extend .row;

		.footer-full-menu {
		  @extend .col-md-4;
		}
	  }
	}
  }

  background-color: $ehri-gray;
  padding-top: $large-margin;
  padding-bottom: $large-margin;

  .social-links {
	padding-top: $medium-margin;
	margin-bottom: $large-margin;

	a {
	  color: $secondary;
	  font-size: $h4-font-size;
	  font-family: $headings-font-family;
	  text-transform: uppercase;
	  font-weight: 600;
	  letter-spacing: 1px;
	  margin-right: 0.7rem;
	}
  }

  .footer-categories {
	@extend .list-unstyled;

	li {
	  padding-bottom: 0.1rem;

	  a {
		@extend .text-muted, .small;
	  }
	}
  }
}

// Pagination
.pagination {
  text-transform: lowercase;

  li .page-link {
	border-right-width: 0;
	border-left-width: 0;
  }

  li:first-child .page-link {
	border-left-width: 1px;
  }

  li:last-child .page-link {
	border-right-width: 1px;
  }
}


// Comments
.comments-area {
  margin: $medium-margin 0 $large-margin 0;

  .comments-title {
	text-transform: none;
	margin-bottom: $large-margin;
  }

  .comment-list {
	@extend .list-unstyled;
  }

  .comment .children {
	@extend .list-unstyled;
	margin-left: 6rem;
  }

  .comment-body {

	@extend .media;

	img.avatar {
	  @extend .rounded-circle;
	}

	margin-bottom: 2rem;
  }

  .comment-content {
	@extend .media-body;

	background-color: $ehri-gray;
	margin-left: 2rem;
	padding: 0.75rem 0.75rem 0.75rem $medium-margin;

	.comment-tab {
	  float: left;
	  width: 0;
	  height: 0;
	  border-style: solid;
	  border-width: 1rem 1rem 1rem 0;
	  border-color: transparent $ehri-gray transparent transparent;
	  margin: .25rem auto 0 -2.41rem; // sqrt(2)ish
	}
  }

  .comment-author {
	margin-top: .5rem;
  }

  .comment-metadata {
	margin-bottom: $small-margin;
  }

  .comment-metadata * {
	@extend .text-muted;
	font-size: $font-size-sm;
  }

  .reply {
	@extend .pull-right;

	a {
	  @extend .btn, .btn-lg, .btn-primary;
	}
  }

  #respond-shortcut {
	margin-left: 2rem;
  }

  .comment-reply-title {
	margin-bottom: $medium-margin;
  }

  .comment-form-meta, .comment-form-comment {
	label {
	  text-transform: uppercase;
	}
  }

  // comment area buttons are no uppercase and have more
  // horizontal padding
  .comment-action {
	@extend .btn, .btn-primary;
	text-transform: none;
	padding: $small-margin 2rem;
	font-size: $font-size-base;
  }

  // collapse comments at small widths
  @media (max-width: map_get($grid-breakpoints, md)) {
	img {
	  width: 2.125rem;
	  height: 2.125rem;
	  margin: 0 0 -1rem $medium-margin;
	}
	.comment-body {
	  display: block;
	}
	.comment-content {
	  margin-left: 0;
	}
	.comment-tab {
	  display: none;
	}
	.comment-meta {
	  margin-top: 1rem;
	}
  }
}

// Sharing
.share-post {
  clear: both;
  @extend .nav;
  margin-bottom: $medium-margin;

  h4 {
	margin-right: 0.75rem;
  }

  ul {
	margin: 0;
	padding: 0;

	display: flex;
	flex-direction: row;
	flex-grow: 1;
	flex-wrap: nowrap;

	li {
	  @extend .list-inline-item;
	  margin-right: 0.75rem;

	  a {
		color: $secondary;
	  }
	}
  }
}

// Related posts using the Contextual Related Posts plugin
.crp_related, .related-posts {

  .related-post-items {
	@extend .row;
  }

  .related-post-item {
	@extend .col-md-4;
  }

  h3 {
	margin-bottom: $medium-margin;
  }

  .related-post {
	margin-bottom: $medium-margin;
	padding-bottom: $medium-margin;

	@media (max-width: map_get($container-max-widths, lg)) {
	  border-bottom: 1px solid $divider-color;
	}
  }

  img {
	object-fit: cover;
	height: 220px;
	width: 100%;
	margin-bottom: $medium-margin;
  }

  .related-post-meta {
	margin-bottom: $small-margin;

	.byline::after {
	  content: ' | ';
	}
  }

  .related-post-meta * {
	@extend .text-muted;
	font-size: $font-size-sm;
  }
}

// CRP sidebar styling
.widget_widget_crp {
  ul {
	@extend .list-unstyled;

	li {
	  margin-bottom: 1rem;
	}
  }

  .crp_date {
	@extend .text-muted, .small;
	display: block;
  }

  // Hide the sidebar CRM widget when sidebar is collapsed
  @media (max-width: map_get($grid-breakpoints, lg)) {
	display: none;
  }
}

// Clean & Simple Contact Form (CSCF) style overrides
#cscf {
  label {
	text-transform: uppercase;
  }

  input[type=submit] {
	@extend .btn, .btn-primary, .btn-lg;
  }
}
